{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport styles from \"./styles\";\nimport LoginComponent from \"./Login.component\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { Constants } from \"../../common\";\nimport { login } from \"../../client/index\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar invalidCredentialsModalIntialState = {\n  title: Constants.language.generic.sorry,\n  subtitle: Constants.language.screensText.login.rejected,\n  primaryButtonLabel: Constants.language.generic.accept,\n  isModalVisible: false\n};\n\nvar LoginScreen = function LoginScreen(props) {\n  var navigation = useNavigation();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(invalidCredentialsModalIntialState),\n      _useState6 = _slicedToArray(_useState5, 2),\n      invalidModal = _useState6[0],\n      setInvalidModal = _useState6[1];\n\n  var handlePressNext = function _callee() {\n    var res;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(user == \"\" || password == \"\")) {\n              _context.next = 4;\n              break;\n            }\n\n            Alert.alert(Error, \"Faltan datos\");\n            _context.next = 19;\n            break;\n\n          case 4:\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(login(user, password));\n\n          case 6:\n            res = _context.sent;\n\n            if (!(res == \"\")) {\n              _context.next = 11;\n              break;\n            }\n\n            setInvalidModal(_objectSpread(_objectSpread({}, invalidModal), {}, {\n              isModalVisible: true\n            }));\n            _context.next = 19;\n            break;\n\n          case 11:\n            console.log(\"id\", res[0].id);\n            _context.next = 14;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"@id\", \"\" + res[0].id));\n\n          case 14:\n            _context.next = 16;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"@username\", res[0].username));\n\n          case 16:\n            _context.next = 18;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"@email\", res[0].email));\n\n          case 18:\n            navigation.navigate(Constants.screens.Home);\n\n          case 19:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var acceptModal = function acceptModal() {\n    setInvalidModal(_objectSpread(_objectSpread({}, invalidModal), {}, {\n      isModalVisible: false\n    }));\n  };\n\n  return _jsx(LoginComponent, {\n    handlePressNext: handlePressNext,\n    user: user,\n    password: password,\n    setUser: setUser,\n    setPassword: setPassword,\n    invalidModal: invalidModal,\n    acceptModal: acceptModal\n  });\n};\n\nexport default LoginScreen;","map":{"version":3,"names":["React","useState","styles","LoginComponent","useNavigation","Constants","login","AsyncStorage","invalidCredentialsModalIntialState","title","language","generic","sorry","subtitle","screensText","rejected","primaryButtonLabel","accept","isModalVisible","LoginScreen","props","navigation","user","setUser","password","setPassword","invalidModal","setInvalidModal","handlePressNext","Alert","alert","Error","res","console","log","id","setItem","username","email","navigate","screens","Home","acceptModal"],"sources":["C:/laragon/www/equitec_mobile/src/screens/Login/Login.screen.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { View, Text, Alert } from \"react-native\";\r\nimport styles from \"./styles\";\r\nimport LoginComponent from \"./Login.component\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { Constants } from \"../../common\";\r\nimport { login } from \"../../client/index\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nconst invalidCredentialsModalIntialState = {\r\n  title: Constants.language.generic.sorry,\r\n  subtitle: Constants.language.screensText.login.rejected,\r\n  primaryButtonLabel: Constants.language.generic.accept,\r\n  isModalVisible: false,\r\n};\r\nconst LoginScreen = (props) => {\r\n  const navigation = useNavigation();\r\n\r\n  const [user, setUser] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [invalidModal, setInvalidModal] = useState(\r\n    invalidCredentialsModalIntialState\r\n  );\r\n\r\n  const handlePressNext = async () => {\r\n    if (user == \"\" || password == \"\") {\r\n      Alert.alert(Error, \"Faltan datos\");\r\n    } else {\r\n      const res = await login(user, password);\r\n      if (res == \"\") {\r\n        setInvalidModal({\r\n          ...invalidModal,\r\n          isModalVisible: true,\r\n        });\r\n      } else {\r\n        console.log(\"id\", res[0].id);\r\n        await AsyncStorage.setItem(\"@id\", \"\" + res[0].id);\r\n        await AsyncStorage.setItem(\"@username\", res[0].username);\r\n        await AsyncStorage.setItem(\"@email\", res[0].email);\r\n        navigation.navigate(Constants.screens.Home);\r\n      }\r\n    }\r\n  };\r\n\r\n  const acceptModal = () => {\r\n    setInvalidModal({\r\n      ...invalidModal,\r\n      isModalVisible: false,\r\n    });\r\n  };\r\n  return (\r\n    <LoginComponent\r\n      handlePressNext={handlePressNext}\r\n      user={user}\r\n      password={password}\r\n      setUser={setUser}\r\n      setPassword={setPassword}\r\n      invalidModal={invalidModal}\r\n      acceptModal={acceptModal}\r\n    />\r\n  );\r\n};\r\n\r\nexport default LoginScreen;\r\n"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;;;;AAEA,OAAOC,MAAP;AACA,OAAOC,cAAP;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,SAASC,SAAT;AACA,SAASC,KAAT;AACA,OAAOC,YAAP,MAAyB,2CAAzB;;AAEA,IAAMC,kCAAkC,GAAG;EACzCC,KAAK,EAAEJ,SAAS,CAACK,QAAV,CAAmBC,OAAnB,CAA2BC,KADO;EAEzCC,QAAQ,EAAER,SAAS,CAACK,QAAV,CAAmBI,WAAnB,CAA+BR,KAA/B,CAAqCS,QAFN;EAGzCC,kBAAkB,EAAEX,SAAS,CAACK,QAAV,CAAmBC,OAAnB,CAA2BM,MAHN;EAIzCC,cAAc,EAAE;AAJyB,CAA3C;;AAMA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAAW;EAC7B,IAAMC,UAAU,GAAGjB,aAAa,EAAhC;;EAEA,gBAAwBH,QAAQ,CAAC,EAAD,CAAhC;EAAA;EAAA,IAAOqB,IAAP;EAAA,IAAaC,OAAb;;EACA,iBAAgCtB,QAAQ,CAAC,EAAD,CAAxC;EAAA;EAAA,IAAOuB,QAAP;EAAA,IAAiBC,WAAjB;;EACA,iBAAwCxB,QAAQ,CAC9CO,kCAD8C,CAAhD;EAAA;EAAA,IAAOkB,YAAP;EAAA,IAAqBC,eAArB;;EAIA,IAAMC,eAAe,GAAG;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA,MAClBN,IAAI,IAAI,EAAR,IAAcE,QAAQ,IAAI,EADR;cAAA;cAAA;YAAA;;YAEpBK,KAAK,CAACC,KAAN,CAAYC,KAAZ,EAAmB,cAAnB;YAFoB;YAAA;;UAAA;YAAA;YAAA,iCAIFzB,KAAK,CAACgB,IAAD,EAAOE,QAAP,CAJH;;UAAA;YAIdQ,GAJc;;YAAA,MAKhBA,GAAG,IAAI,EALS;cAAA;cAAA;YAAA;;YAMlBL,eAAe,iCACVD,YADU;cAEbR,cAAc,EAAE;YAFH,GAAf;YANkB;YAAA;;UAAA;YAWlBe,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBF,GAAG,CAAC,CAAD,CAAH,CAAOG,EAAzB;YAXkB;YAAA,iCAYZ5B,YAAY,CAAC6B,OAAb,CAAqB,KAArB,EAA4B,KAAKJ,GAAG,CAAC,CAAD,CAAH,CAAOG,EAAxC,CAZY;;UAAA;YAAA;YAAA,iCAaZ5B,YAAY,CAAC6B,OAAb,CAAqB,WAArB,EAAkCJ,GAAG,CAAC,CAAD,CAAH,CAAOK,QAAzC,CAbY;;UAAA;YAAA;YAAA,iCAcZ9B,YAAY,CAAC6B,OAAb,CAAqB,QAArB,EAA+BJ,GAAG,CAAC,CAAD,CAAH,CAAOM,KAAtC,CAdY;;UAAA;YAelBjB,UAAU,CAACkB,QAAX,CAAoBlC,SAAS,CAACmC,OAAV,CAAkBC,IAAtC;;UAfkB;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAxB;;EAoBA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;IACxBf,eAAe,iCACVD,YADU;MAEbR,cAAc,EAAE;IAFH,GAAf;EAID,CALD;;EAMA,OACE,KAAC,cAAD;IACE,eAAe,EAAEU,eADnB;IAEE,IAAI,EAAEN,IAFR;IAGE,QAAQ,EAAEE,QAHZ;IAIE,OAAO,EAAED,OAJX;IAKE,WAAW,EAAEE,WALf;IAME,YAAY,EAAEC,YANhB;IAOE,WAAW,EAAEgB;EAPf,EADF;AAWD,CA9CD;;AAgDA,eAAevB,WAAf"},"metadata":{},"sourceType":"module"}